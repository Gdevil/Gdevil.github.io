"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[735],{37736:function(Y,v,n){n.r(v),n.d(v,{default:function(){return Q}});var T=n(49677),C=n.n(T),L=n(15009),h=n.n(L),w=n(99289),g=n.n(w),F=n(12444),p=n.n(F),E=n(72004),y=n.n(E),I=n(25098),S=n.n(I),Z=n(31996),M=n.n(Z),D=n(26037),A=n.n(D),P=n(9783),t=n.n(P),j=n(39318),m=n(61456),W=n(21990),O=n(40877),u=n(18423),k=n(5461),l=u.Z.Three,R=u.Z.TWEEN,z=u.Z.OrbitControls,B=u.Z.dat,J=u.Z.Stats,U=u.Z.OBJLoader,N=u.Z.MTLLoader,V=u.Z.GLTFLoader,$=y()(function f(){var e=this;p()(this,f),t()(this,"container",void 0),t()(this,"camera",void 0),t()(this,"scene",void 0),t()(this,"renderer",void 0),t()(this,"stats",void 0),t()(this,"animateFrame",void 0),t()(this,"tween",void 0),t()(this,"controls",void 0),t()(this,"clock",new l.Clock),t()(this,"mixer",void 0),t()(this,"Geometrys",{}),t()(this,"Materials",{}),t()(this,"particleSystem",void 0),t()(this,"GuiInit",null),t()(this,"guiData",{x:.005,color:"#000000",autoRotate:!0}),t()(this,"birdAnimation",{direction:new l.Vector3(0,1,0),directionTrend:new l.Vector3(0,1,0),speed:15,speedDecay:0}),t()(this,"init",function(i){e.container=document.getElementById(i);var a=e.container.clientWidth,o=e.container.clientHeight;e.scene=new l.Scene,e.camera=new l.PerspectiveCamera(45,a/o,1,500),e.camera.position.x=0,e.camera.position.y=0,e.camera.position.z=80,e.camera.lookAt(e.scene.position),e.renderer=new l.WebGLRenderer,e.renderer.setPixelRatio(window.devicePixelRatio),e.renderer.setSize(a,o),e.container.appendChild(e.renderer.domElement),e.controls=new z(e.camera,e.renderer.domElement),e.controls.enableDamping=!0,e.controls.dampingFactor=.1,e.addThings(),e.addLight(),e.animate(),e.initStats(),e.initGui()}),t()(this,"destroy",function(){e.toggleGui(0),Object.values(e.Geometrys).forEach(function(i){i.dispose()}),Object.values(e.Materials).forEach(function(i){i.dispose()}),e.scene.clear(),e.renderer.dispose(),e.renderer.forceContextLoss(),e.camera=null,e.scene=null,e.renderer=null,e.GuiInit=null,e.stats=null,e.tween&&(e.tween.stop(),e.tween=null),cancelAnimationFrame(e.animateFrame)}),t()(this,"initStats",function(){e.stats=new J,e.stats.showPanel(0),e.stats.dom.style.position="absolute",e.container.appendChild(e.stats.dom)}),t()(this,"initGui",function(){if(e.GuiInit){e.toggleGui();return}e.GuiInit=new B.GUI({}),e.GuiInit.domElement.style.position="absolute",e.GuiInit.domElement.style.right="10px",e.GuiInit.domElement.style.top="10px";var i=e.GuiInit.addFolder("\u63A7\u5236\u7A97\u53E3");i.add(e.guiData,"x",-.1,.1,.005).name("\u81EA\u8F6C\u901F\u5EA6"),i.addColor(e.guiData,"color").name("\u80CC\u666F\u989C\u8272"),i.open()}),t()(this,"toggleGui",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!(!e.GuiInit||!e.GuiInit.domElement)){var a=e.GuiInit.domElement.style.display=="none"?"":"none";i==0&&(a="none"),e.GuiInit.domElement.style.display=a}}),t()(this,"addLight",function(){var i=new l.AmbientLight(6842472);e.scene.add(i);var a=new l.DirectionalLight(16777215);a.position.set(550,100,550),a.intensity=.6,e.scene.add(a)}),t()(this,"addThings",function(){e.addStars(),e.addGlb(),e.initTween()}),t()(this,"addStars",function(){var i=new N;i.load("../models/stars.mtl",function(a){a.preload();var o=new U;o.setMaterials(a),o.load("../models/stars.obj",function(r){r.traverse(function(s){s instanceof l.Mesh&&(s.material.shininess=.001,s.material.reflectivity=.1,r.receiveShadow=!0,r.castShadow=!0)}),console.log("stars",r),r.position.set(0,0,-20),r.scale.set(4,4,4),r.receiveShadow=!0,r.castShadow=!0,e.scene.add(r)},function(r){console.log(r.loaded/r.total*100+"% loaded")},function(r){console.log(r)})})}),t()(this,"addGlb",function(){var i=["../models/Parrot.glb","../models/Flamingo.glb"],a=[13434879,16768767],o=[.2,.1],r=Math.floor(Math.random()*i.length);new V().load(i[r],function(s){console.log("glbbbbb:",s,s.animations),e.mixer=new l.AnimationMixer(s.scene),s.animations.forEach(function(X){e.mixer.clipAction(X).play()});var d=s.scene.children[0],q=d.geometry;d.scale.set(.3,.3,.3),e.scene.add(s.scene)})}),t()(this,"initTween",function(){}),t()(this,"animate",function(){e.stats&&e.stats.begin(),e.render(),R.update(),e.controls.update(),e.stats&&e.stats.end(),e.animateFrame=requestAnimationFrame(e.animate)}),t()(this,"render",function(){var i=e.clock.getDelta();e.mixer&&e.mixer.update(i),e.renderer&&(e.renderer.setClearColor(e.guiData.color,1),e.renderer.render(e.scene,e.camera))})}),H=new $,G=H,c=n(85893),b=m.Z.Title,x=m.Z.Paragraph,K=m.Z.Text,Q=function(f){M()(i,f);var e=A()(i);function i(){var a;p()(this,i);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return a=e.call.apply(e,[this].concat(r)),t()(S()(a),"state",{}),a}return y()(i,[{key:"didShow",value:function(){var a=g()(h()().mark(function r(){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:case"end":return d.stop()}},r)}));function o(){return a.apply(this,arguments)}return o}()},{key:"didMount",value:function(){var a=g()(h()().mark(function r(){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:G.init("WebGL-three-loaders");case 1:case"end":return d.stop()}},r)}));function o(){return a.apply(this,arguments)}return o}()},{key:"willUnmount",value:function(){G.destroy()}},{key:"render",value:function(){return C()(this.state),(0,c.jsxs)(W.Z,{title:"",children:[(0,c.jsx)(O.Z,{}),(0,c.jsxs)(m.Z,{children:[(0,c.jsx)(b,{level:3,children:"\u52A0\u8F7D\u5668"}),(0,c.jsx)(x,{children:(0,c.jsx)(K,{})}),(0,c.jsx)(x,{children:"gltf\u683C\u5F0F\u6587\u6863\uFF1A"}),(0,c.jsx)("a",{href:"https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#concepts-general",children:"https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#concepts-general"})]}),(0,c.jsx)("div",{id:"WebGL-three-loaders",style:{width:"100%",height:"600px",position:"relative"}})]})}}]),i}(j.Z)}}]);
