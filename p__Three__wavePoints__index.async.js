"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8044],{68997:function(Q,p,e){e.r(p),e.d(p,{default:function(){return V}});var D=e(49677),B=e.n(D),M=e(15009),h=e.n(M),T=e(99289),F=e.n(T),P=e(12444),E=e.n(P),x=e(72004),G=e.n(x),I=e(25098),j=e.n(I),S=e(31996),w=e.n(S),N=e(26037),R=e.n(N),O=e(9783),n=e.n(O),U=e(39318),c=e(61456),Y=e(21990),Z=e(40877),m=e(18423),b=e(5461),l=m.Z.Three,z=m.Z.TWEEN,L=m.Z.dat,W=m.Z.Stats,X=G()(function v(){var t=this;E()(this,v),n()(this,"container",void 0),n()(this,"camera",void 0),n()(this,"scene",void 0),n()(this,"renderer",void 0),n()(this,"stats",void 0),n()(this,"animateFrame",void 0),n()(this,"starsGroup",void 0),n()(this,"Geometrys",{}),n()(this,"Materials",{}),n()(this,"GuiInit",null),n()(this,"guiData",{color:"#ffffff",mouseMove:!1,autoRotate:!1,SEPARATION:100,AMOUNTX:50,AMOUNTY:50,positionYBase:50}),n()(this,"mouseData",{mouseX:0,mouseY:0}),n()(this,"init",function(){t.container=document.getElementById("WebGL-wave-points-test");var a=t.container.clientWidth,i=t.container.clientHeight;t.scene=new l.Scene,t.camera=new l.PerspectiveCamera(60,a/i,1,1e4),t.camera.position.set(944,206,262),t.camera.lookAt(t.scene.position),t.renderer=new l.WebGLRenderer,t.renderer.setPixelRatio(window.devicePixelRatio),t.renderer.setSize(a,i),t.container.appendChild(t.renderer.domElement),t.addThings(),t.addLight(),t.animate(),t.initEventListen(),t.initStats(),t.initGui()}),n()(this,"destroy",function(){t.toggleGui(0),Object.values(t.Geometrys).forEach(function(a){a.dispose()}),Object.values(t.Materials).forEach(function(a){a.dispose()}),t.scene.clear(),t.renderer.dispose(),t.renderer.forceContextLoss(),t.camera=null,t.scene=null,t.renderer=null,t.GuiInit=null,cancelAnimationFrame(t.animateFrame)}),n()(this,"initGui",function(){if(t.GuiInit){t.toggleGui();return}t.GuiInit=new L.GUI({}),t.GuiInit.domElement.style.position="absolute",t.GuiInit.domElement.style.right="10px",t.GuiInit.domElement.style.top="10px";var a=t.GuiInit.addFolder("\u63A7\u5236\u7A97\u53E3");a.addColor(t.guiData,"color").name("\u7C92\u5B50\u989C\u8272"),a.add(t.guiData,"mouseMove").name("\u9F20\u6807\u6643\u52A8"),a.open();var i=t.GuiInit.addFolder("stars position");i.add(t.starsGroup.position,"x",-500,500,1),i.add(t.starsGroup.position,"y",-500,500,1),i.add(t.starsGroup.position,"z",-500,500,1),i.open();var s=t.GuiInit.addFolder("stars rotation");s.add(t.guiData,"autoRotate").name("\u81EA\u52A8\u65CB\u8F6C"),s.add(t.starsGroup.rotation,"x",-3.14,3.14,.01),s.add(t.starsGroup.rotation,"y",-3.14,3.14,.01),s.add(t.starsGroup.rotation,"z",-3.14,3.14,.01),s.open();var r=t.GuiInit.addFolder("\u5176\u4ED6");r.add(t.guiData,"positionYBase",20,100,1).name("\u6643\u52A8\u5E45\u5EA6"),r.open()}),n()(this,"initStats",function(){t.stats=new W,t.stats.showPanel(0),t.stats.dom.style.position="absolute",t.container.appendChild(t.stats.dom)}),n()(this,"toggleGui",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!(!t.GuiInit||!t.GuiInit.domElement)){var i=t.GuiInit.domElement.style.display=="none"?"":"none";a==0&&(i="none"),t.GuiInit.domElement.style.display=i}}),n()(this,"initEventListen",function(){t.container.addEventListener("pointermove",t.onPointerMove)}),n()(this,"onPointerMove",function(a){a.isPrimary!==!1&&(t.mouseData.mouseX=a.clientX-t.container.clientWidth,t.mouseData.mouseY=a.clientY-t.container.clientHeight)}),n()(this,"addLight",function(){}),n()(this,"addThings",function(){var a=new l.AxesHelper(800);t.scene.add(a),t.starsGroup=new l.Group,t.scene.add(t.starsGroup),t.Geometrys.starsGeometry=new l.BufferGeometry;for(var i=[],s=[],r=0;r<t.guiData.AMOUNTX;r++)for(var o=0;o<t.guiData.AMOUNTY;o++){var d=r*t.guiData.SEPARATION-t.guiData.AMOUNTX*t.guiData.SEPARATION/2,f=0,K=o*t.guiData.SEPARATION-t.guiData.AMOUNTY*t.guiData.SEPARATION/2;i.push(d,f,K),s.push(100)}t.Geometrys.starsGeometry.setAttribute("position",new l.Float32BufferAttribute(i,3)),t.Materials.starsMaterial=new l.PointsMaterial({color:t.guiData.color,size:4});var y=new l.Points(t.Geometrys.starsGeometry,t.Materials.starsMaterial);t.starsGroup.add(y),console.log("stars:",y,t.Geometrys,t.Materials),t.initTween()}),n()(this,"initTween",function(){}),n()(this,"animate",function(){t.stats&&t.stats.begin(),t.render(),z.update(),t.stats&&t.stats.end(),t.animateFrame=requestAnimationFrame(t.animate)}),n()(this,"starPositionCount",0),n()(this,"render",function(){t.guiData.autoRotate&&(t.starsGroup.rotation.y+=.005),t.guiData.mouseMove&&(t.camera.position.x+=(-t.mouseData.mouseX-t.camera.position.x)*.015,t.camera.position.y+=(-t.mouseData.mouseY-t.camera.position.y)*.015);for(var a=t.Geometrys.starsGeometry.attributes.position.array,i=[],s=0,r=0;r<t.guiData.AMOUNTX;r++)for(var o=0;o<t.guiData.AMOUNTY;o++){var d=Math.sin((r+t.starPositionCount)*.3)*t.guiData.positionYBase+Math.sin((o+t.starPositionCount)*.5)*t.guiData.positionYBase;a[s+1]=d;var f=(Math.sin((r+t.starPositionCount)*.3)+1.3)*8+(Math.sin((o+t.starPositionCount)*.5)+1.3)*4;i[s/3]=f,s+=3}t.Geometrys.starsGeometry.setAttribute("position",new l.Float32BufferAttribute(a,3)),t.starPositionCount+=.1,t.Materials.starsMaterial.size=i[0],t.Materials.starsMaterial.setValues({color:t.guiData.color}),t.renderer.render(t.scene,t.camera)})}),H=new X,g=H,$=e(40439),u=e(85893),A=c.Z.Title,C=c.Z.Paragraph,J=c.Z.Text,V=function(v){w()(a,v);var t=R()(a);function a(){var i;E()(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i=t.call.apply(t,[this].concat(r)),n()(j()(i),"state",{}),i}return G()(a,[{key:"didShow",value:function(){var i=F()(h()().mark(function r(){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:case"end":return d.stop()}},r)}));function s(){return i.apply(this,arguments)}return s}()},{key:"didMount",value:function(){var i=F()(h()().mark(function r(){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:g.init();case 1:case"end":return d.stop()}},r)}));function s(){return i.apply(this,arguments)}return s}()},{key:"willUnmount",value:function(){g.destroy()}},{key:"render",value:function(){return B()(this.state),(0,u.jsxs)(Y.Z,{title:"",children:[(0,u.jsx)(Z.Z,{}),(0,u.jsxs)(c.Z,{children:[(0,u.jsx)(A,{children:"\u7C92\u5B50\u6CE2\u6D6A"}),(0,u.jsxs)(C,{children:[(0,u.jsxs)("p",{children:["\u5148\u5FAA\u73AF\u751F\u6210\u4E00\u4E2A50*50\u7684\u7C92\u5B50\u77E9\u9635\uFF0C\u5229\u7528",(0,u.jsx)(J,{code:!0,children:"setAttribute('position', new Three.Float32BufferAttribute(starArr, 3))"}),"\u8BBE\u7F6E\u6BCF\u4E2A\u7C92\u5B50\u7684\u4F4D\u7F6E\u3002"]}),(0,u.jsx)("p",{})]}),(0,u.jsx)(A,{level:3,children:"\u95EE\u9898"}),(0,u.jsxs)(C,{children:[(0,u.jsx)("p",{children:"1\u3001\u6CA1\u6CD5\u5355\u72EC\u8BBE\u7F6E\u7C92\u5B50\u5927\u5C0F\uFF0C\u73B0\u5728\u53EA\u80FD\u4E00\u8D77\u53D8\uFF08\u4F46\u662F\u53EF\u4EE5\u7528ShaderMaterial\uFF0CGPU\u63A7\u5236\uFF09"}),(0,u.jsx)("p",{children:"\u6750\u8D28\u662F\u9488\u5BF9\u6574\u4E2A\u7C92\u5B50\u7CFB\u7EDF\u8BBE\u7F6E\u7684\uFF0C\u6240\u4EE5\u53EA\u80FD\u7EF4\u62A4\u7C92\u5B50\u4F4D\u79FB\u3002\u5982\u679C\u8981\u7EF4\u62A4\u7C92\u5B50\u989C\u8272\u3001\u5C3A\u5BF8\u5462\uFF1F"}),(0,u.jsx)("p",{children:"\u6211\u4EEC\u5FC5\u987B\u4E3A\u6BCF\u4E2A\u7C92\u5B50\u8BBE\u7F6E\u4E0D\u540C\u7684\u6750\u8D28\uFF0C\u7531\u6B64\u4E5F\u9020\u6210\u4E0D\u5C0F\u7684\u6027\u80FD\u635F\u8017"}),(0,u.jsxs)("p",{children:["\u53C2\u8003\uFF1A",(0,u.jsx)("a",{href:"https://www.shuzhiduo.com/A/pRdBB2M9dn/",target:"_blank",children:"https://www.shuzhiduo.com/A/pRdBB2M9dn/"})]})]})]}),(0,u.jsx)("div",{className:$.Z.canvasBox,id:"WebGL-wave-points-test",style:{height:"600px"}})]})}}]),a}(U.Z)}}]);
