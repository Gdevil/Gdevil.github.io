(self.webpackChunk=self.webpackChunk||[]).push([[2328],{50362:function(c,b,a){"use strict";a.r(b),a.d(b,{default:function(){return le}});var L=a(15009),g=a.n(L),h=a(99289),v=a.n(h),p=a(12444),y=a.n(p),C=a(72004),M=a.n(C),x=a(25098),f=a.n(x),D=a(31996),m=a.n(D),G=a(26037),P=a.n(G),W=a(9783),t=a.n(W),Y=a(39318),X=a(97857),$=a.n(X),J=a(13769),Q=a.n(J),K=a(93967),q=a.n(K),_=a(67294),E=a(18423),ee=a(15539),A=a(90980),te=a(48655),i=E.Z.Three,I=E.Z.TWEEN,ne=E.Z.dat,oe=E.Z.OrbitControls,z=E.Z.OBJLoader,N=E.Z.MTLLoader,R=10,d=5,V=R*2,F=d*2,ae=M()(function T(){var e=this;y()(this,T),t()(this,"container",void 0),t()(this,"camera",void 0),t()(this,"scene",void 0),t()(this,"renderer",void 0),t()(this,"controls",void 0),t()(this,"animateFrame",void 0),t()(this,"windowHalfX",window.innerWidth/2),t()(this,"windowHalfY",window.innerHeight/2),t()(this,"raycaster",void 0),t()(this,"pointer",void 0),t()(this,"buttonGroup",void 0),t()(this,"pointLight",void 0),t()(this,"evaluator",void 0),t()(this,"brush",void 0),t()(this,"resultBrush",void 0),t()(this,"buttonState",0),t()(this,"buttonAniVal",{val:0}),t()(this,"lights",{}),t()(this,"Geometrys",{}),t()(this,"Materials",{}),t()(this,"Meshs",{}),t()(this,"GuiInit",null),t()(this,"guiData",{x:.005,btnCo1:new i.Color("#201f33"),btnCo2:new i.Color("#8b9fd7"),autoRotate:!0}),t()(this,"mouseData",{mouseX:0,mouseY:0}),t()(this,"ballPosition",{x:-d/2,z:d*.5+.1}),t()(this,"init",function(o){e.container=document.getElementById(o);var r=e.container.clientWidth,s=e.container.clientHeight;e.scene=new i.Scene;var n=new i.CubeTextureLoader;n.setPath("../textures/");var l=n.load(["posx.jpg","negx.jpg","posy.jpg","negy.jpg","posz.jpg","negz.jpg"]);l.colorSpace=i.SRGBColorSpace,e.scene.background=l,e.scene.rotation.y=1.6,e.camera=new i.PerspectiveCamera(45,r/s,1,100),e.camera.position.x=30,e.camera.position.y=0,e.camera.position.z=0,e.camera.lookAt(e.scene.position),e.renderer=new i.WebGLRenderer,e.renderer.setPixelRatio(window.devicePixelRatio),e.renderer.setSize(r,s),e.renderer.shadowMap.enabled=!0,e.container.appendChild(e.renderer.domElement),e.controls=new oe(e.camera,e.renderer.domElement),e.controls.enableDamping=!0,e.controls.dampingFactor=.1,e.raycaster=new i.Raycaster,e.pointer=new i.Vector2(-2,-2),e.evaluator=new ee.v,e.evaluator.useGroups=!1,e.addThings(),e.addLight(),e.animate(),e.initEventListen(),e.initGui()}),t()(this,"destroy",function(){e.toggleGui(0),Object.values(e.Geometrys).forEach(function(o){o.dispose()}),Object.values(e.Materials).forEach(function(o){o.dispose()}),e.scene.clear(),e.renderer.dispose(),e.renderer.forceContextLoss(),e.camera=null,e.scene=null,e.renderer=null,e.GuiInit=null,window.removeEventListener("resize",e.onWindowResize),cancelAnimationFrame(e.animateFrame)}),t()(this,"initGui",function(){if(e.GuiInit){e.toggleGui();return}e.GuiInit=new ne.GUI({}),e.GuiInit.domElement.style.position="absolute",e.GuiInit.domElement.style.right="10px",e.GuiInit.domElement.style.top="10px";var o=e.GuiInit.addFolder("\u63A7\u5236\u7A97\u53E3");o.add(e.guiData,"x",-.1,.1,.005).name("\u81EA\u8F6C\u901F\u5EA6"),o.open()}),t()(this,"toggleGui",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!(!e.GuiInit||!e.GuiInit.domElement)){var r=e.GuiInit.domElement.style.display=="none"?"":"none";o==0&&(r="none"),e.GuiInit.domElement.style.display=r}}),t()(this,"clickState",""),t()(this,"initEventListen",function(){e.container.addEventListener("pointermove",e.onPointerMove),e.container.addEventListener("mousedown",function(){e.clickState="down"},!1),e.container.addEventListener("mousemove",function(){e.clickState=""},!1),e.container.addEventListener("mouseup",function(){e.clickState=="down"&&(e.clickState="",e.onPointClick())},!1),window.addEventListener("resize",e.onWindowResize)}),t()(this,"onPointerMove",function(o){if(o.isPrimary!==!1){e.mouseData.mouseX=o.clientX-e.container.offsetLeft,e.mouseData.mouseY=o.clientY-e.container.offsetTop;var r=window.pageYOffset||document.documentElement.scrollTop;e.pointer.x=e.mouseData.mouseX/e.container.clientWidth*2-1,e.pointer.y=-((e.mouseData.mouseY+r)/e.container.clientHeight)*2+1}}),t()(this,"onPointClick",function(){console.log("click"),e.toggleTween()}),t()(this,"onWindowResize",function(){var o=e.container.clientWidth,r=e.container.clientHeight;e.camera.aspect=o/r,e.camera.updateProjectionMatrix(),e.renderer&&e.renderer.setSize(o,r)}),t()(this,"addLight",function(){e.lights.ambiLigth=new i.AmbientLight(16777215,.8),e.scene.add(e.lights.ambiLigth),e.lights.pointLight=new i.PointLight(16777215,5,5),e.lights.pointLight.position.set(0,0,2),e.scene.add(e.lights.pointLight),e.lights.directLight=new i.DirectionalLight(16777215,.6),e.lights.directLight.position.set(-10,10,25),e.lights.directLight.castShadow=!0,e.lights.directLight.shadow.radius=6,e.scene.add(e.lights.directLight)}),t()(this,"addThings",function(){var o=new i.PlaneGeometry(V,F),r=new i.MeshBasicMaterial({color:16776960});e.Meshs.raycasterPlatform=new i.Mesh(o,r),e.Meshs.raycasterPlatform.visible=!1,e.scene.add(e.Meshs.raycasterPlatform),e.buttonGroup=new i.Group,e.addRoundedRectShape(),e.addBall(),e.addClouds(),e.addStars()}),t()(this,"addRoundedRectShape",function(){var o=new i.Shape;(function(u,w,O,k,B){var S=B*.5,H=k>B?k-B:0;u.moveTo(w+S,O+B),u.lineTo(w+S+H,O+B),u.absarc(w+S+H,O+S,S,Math.PI/2,-Math.PI/2,!0),u.lineTo(w+S,O),u.absarc(w+S,O+S,S,-Math.PI/2,Math.PI/2,!0)})(o,0,0,R,d);var r={depth:d*.05,bevelEnabled:!0,bevelSegments:10,steps:1,bevelSize:d*.05,bevelThickness:d*.05},s=new i.ExtrudeGeometry(o,r);e.Materials.btnMaterial=new i.MeshPhongMaterial({color:e.guiData.btnCo1,wireframe:!1}),e.Materials.btnMaterial.shininess=10;var n=new i.Mesh(s,e.Materials.btnMaterial);n.receiveShadow=!0,n.castShadow=!0,e.buttonGroup.add(n),e.buttonGroup.position.set(-R*.5,-d*.5,0),e.scene.add(e.buttonGroup)}),t()(this,"addBall",function(){e.Geometrys.ballGeometry=new i.SphereGeometry(d*.37,20,20),e.Materials.ballMaterial=new i.ShaderMaterial({uniforms:{val:{value:0},color1:{value:new i.Color("#fae2c4")},color2:{value:new i.Color("#8360af")},color3:{value:new i.Color("#a1a2d9")},color1_1:{value:new i.Color("#e66739")},color2_1:{value:new i.Color("#eb9846")},color3_1:{value:new i.Color("#ffe5ae")}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
        }
      `,fragmentShader:`
        uniform vec3 color1;
        uniform vec3 color2;
        uniform vec3 color3;
        uniform vec3 color1_1;
        uniform vec3 color2_1;
        uniform vec3 color3_1;
        uniform float val;
        varying vec2 vUv;
        void main() {
          float y = vUv.y;
          // \u53D1\u5149\u7684\u5F3A\u5EA6
          float glowIntensity = 1.5;

          vec3 co1 = mix(color1.rgb * glowIntensity, color1_1.rgb * glowIntensity, val);
          vec3 co2 = mix(color2.rgb * glowIntensity, color2_1.rgb * glowIntensity, val);
          vec3 co3 = mix(color3.rgb * glowIntensity, color3_1.rgb * glowIntensity, val);
          vec3 gradientColor;
          if (y <= 0.5) {
            gradientColor = mix(co1, co2, y * 2.0);
          } else {
            gradientColor = mix(co2, co3, y * 2.0 - 1.0);
          }
          gl_FragColor = vec4(gradientColor, 1.0);
        }
      `}),e.Meshs.ball=new A.B(e.Geometrys.ballGeometry,e.Materials.ballMaterial),e.brush=new A.B(new i.CylinderGeometry(d*.32,d*.32,d*2,40),e.Materials.ballMaterial),e.brush.position.set(-R*.16,d*.18,0),e.brush.rotation.set(.5*Math.PI,0,0),e.brush.updateMatrixWorld()}),t()(this,"addClouds",function(){var o=new N;o.load("../models/cloud.mtl",function(r){r.preload();var s=new z;s.setMaterials(r),s.load("../models/cloud.obj",function(n){n.traverse(function(l){l instanceof i.Mesh&&(l.material.shininess=.001,l.material.reflectivity=.1,n.receiveShadow=!0,n.castShadow=!0)}),console.log("object",n),n.position.set(-2,0,1),n.receiveShadow=!0,n.castShadow=!0,e.Meshs.clouds=n,e.scene.add(e.Meshs.clouds)},function(n){console.log(n.loaded/n.total*100+"% loaded")},function(n){console.log(n)})})}),t()(this,"addStars",function(){var o=new N;o.load("../models/stars.mtl",function(r){r.preload();var s=new z;s.setMaterials(r),s.load("../models/stars.obj",function(n){n.traverse(function(l){l instanceof i.Mesh&&(l.material.shininess=.001,l.material.reflectivity=.1,n.receiveShadow=!0,n.castShadow=!0)}),console.log("stars",n),n.position.set(2,0,1),n.receiveShadow=!0,n.castShadow=!0,e.Meshs.stars=n,e.scene.add(e.Meshs.stars)},function(n){console.log(n.loaded/n.total*100+"% loaded")},function(n){console.log(n)})})}),t()(this,"updateCSG",function(){e.resultBrush=e.evaluator.evaluate(e.Meshs.ball,e.brush,te.vC,e.resultBrush),e.resultBrush.material=e.Materials.ballMaterial,e.resultBrush.castShadow=!0,e.resultBrush.receiveShadow=!0,e.scene.add(e.resultBrush)}),t()(this,"toggleTween",function(o){e.buttonState=e.buttonState==0?1:0;var r=new I.Tween(e.ballPosition).to({x:e.buttonState==1?d/2:-d/2,z:d*.5+.1},800).start().onComplete(function(){o&&o()});r.easing(I.Easing.Back.InOut);var s=new I.Tween(e.buttonAniVal).to({val:e.buttonState},800).easing(I.Easing.Quadratic.InOut).onUpdate(function(n){e.Materials.ballMaterial.uniforms.val.value=n.val}).start()}),t()(this,"restartAnimate",function(){e.stopState=!1,e.animate()}),t()(this,"stopAnimate",function(){e.stopState=!0}),t()(this,"stopState",!1),t()(this,"animate",function(){e.stopState||(e.animateFrame=requestAnimationFrame(e.animate),e.render(),I.update(),e.controls.update())}),t()(this,"render",function(){if(e.renderer){e.raycaster.setFromCamera(e.pointer,e.camera),e.renderer.setClearColor("hsl(248.57, 11.86%, "+(23+e.buttonAniVal.val*20)+"%)",1),e.guiData.autoRotate;var o=e.raycaster.intersectObjects([e.Meshs.raycasterPlatform],!1);if(o[0]){var r=o[0].uv.x,s=o[0].uv.y,n=(r-.5)*V,l=(s-.5)*F;e.lights.pointLight.position.x=n,e.lights.pointLight.position.y=l}e.updateCSG(),e.Meshs.ball.rotation.set(0,0,e.buttonAniVal.val-2),e.Meshs.ball.position.set(e.ballPosition.x,0,e.ballPosition.z),e.Meshs.ball.updateMatrixWorld();var u=e.buttonAniVal.val*.8;e.Meshs.clouds&&e.Meshs.clouds.scale.set(u,u,u);var w=(1-e.buttonAniVal.val)*.5;e.Meshs.stars&&e.Meshs.stars.scale.set(w,w,w),e.Materials.btnMaterial.color.set(new i.Color().lerpColors(e.guiData.btnCo1,e.guiData.btnCo2,e.buttonAniVal.val)),e.lights.pointLight.intensity=5-e.buttonAniVal.val*.8,e.lights.directLight.intensity=.6+e.buttonAniVal.val*.2,e.scene.backgroundBlurriness=.4-e.buttonAniVal.val*.25,e.scene.backgroundIntensity=.2+e.buttonAniVal.val*.8,e.renderer.render(e.scene,e.camera)}})}),re=new ae,U=re,Z=a(88066),j=a(85893),ie=["active","className","children"],se=function(T){m()(o,T);var e=P()(o);function o(){return y()(this,o),e.apply(this,arguments)}return M()(o,[{key:"componentDidMount",value:function(){U.init("three-comp-day-night-btn")}},{key:"componentWillUnmount",value:function(){U.destroy()}},{key:"render",value:function(){var s=this.props,n=s.active,l=s.className,u=s.children,w=Q()(s,ie);return(0,j.jsx)("div",$()({id:"three-comp-day-night-btn",className:q()(Z.Z.button,t()({},Z.Z.night,n),l)},w))}}]),o}(_.Component),le=function(T){m()(o,T);var e=P()(o);function o(){var r;y()(this,o);for(var s=arguments.length,n=new Array(s),l=0;l<s;l++)n[l]=arguments[l];return r=e.call.apply(e,[this].concat(n)),t()(f()(r),"state",{}),r}return M()(o,[{key:"didShow",value:function(){var r=v()(g()().mark(function n(){return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},n)}));function s(){return r.apply(this,arguments)}return s}()},{key:"didMount",value:function(){var r=v()(g()().mark(function n(){return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},n)}));function s(){return r.apply(this,arguments)}return s}()},{key:"render",value:function(){var s=this,n=this.state.isNight;return(0,j.jsx)("div",{children:(0,j.jsx)("div",{style:{marginTop:20},children:(0,j.jsx)(se,{active:n,onClick:function(){s.setState({isNight:!s.state.isNight})}})})})}}]),o}(Y.Z)},75251:function(c,b,a){"use strict";var L;var g=a(67294),h=Symbol.for("react.element"),v=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,y=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C={key:!0,ref:!0,__self:!0,__source:!0};function M(x,f,D){var m,G={},P=null,W=null;D!==void 0&&(P=""+D),f.key!==void 0&&(P=""+f.key),f.ref!==void 0&&(W=f.ref);for(m in f)p.call(f,m)&&!C.hasOwnProperty(m)&&(G[m]=f[m]);if(x&&x.defaultProps)for(m in f=x.defaultProps,f)G[m]===void 0&&(G[m]=f[m]);return{$$typeof:h,type:x,key:P,ref:W,props:G,_owner:y.current}}L=v,b.jsx=M,b.jsxs=M},85893:function(c,b,a){"use strict";c.exports=a(75251)},13769:function(c,b,a){var L=a(48541);function g(h,v){if(h==null)return{};var p=L(h,v),y,C;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(h);for(C=0;C<M.length;C++)y=M[C],!(v.indexOf(y)>=0)&&Object.prototype.propertyIsEnumerable.call(h,y)&&(p[y]=h[y])}return p}c.exports=g,c.exports.__esModule=!0,c.exports.default=c.exports},48541:function(c){function b(a,L){if(a==null)return{};var g={},h=Object.keys(a),v,p;for(p=0;p<h.length;p++)v=h[p],!(L.indexOf(v)>=0)&&(g[v]=a[v]);return g}c.exports=b,c.exports.__esModule=!0,c.exports.default=c.exports}}]);
