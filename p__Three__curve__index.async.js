"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[62],{27706:function(_,y,r){r.r(y),r.d(y,{default:function(){return K}});var L=r(49677),j=r.n(L),T=r(15009),m=r.n(T),z=r(99289),x=r.n(z),I=r(12444),G=r.n(I),P=r(72004),C=r.n(P),D=r(25098),b=r.n(D),F=r(31996),R=r.n(F),Z=r(26037),B=r.n(Z),S=r(9783),e=r.n(S),A=r(39318),v=r(61456),W=r(21990),O=r(40877),c=r(18423),tt=r(5461),a=c.Z.Three,U=c.Z.TWEEN,V=c.Z.dat,N=c.Z.Stats,$=c.Z.OrbitControls,k=C()(function f(){var t=this;G()(this,f),e()(this,"container",void 0),e()(this,"camera",void 0),e()(this,"scene",void 0),e()(this,"renderer",void 0),e()(this,"stats",void 0),e()(this,"animateFrame",void 0),e()(this,"tween",void 0),e()(this,"controls",void 0),e()(this,"clock",new a.Clock),e()(this,"Geometrys",{}),e()(this,"Materials",{}),e()(this,"Meshs",{}),e()(this,"cubeGroup",{}),e()(this,"curve",void 0),e()(this,"GuiInit",null),e()(this,"guiData",{x:.005,color:"#000000",autoRotate:!0}),e()(this,"pointList",[{x:10,y:10,z:-10},{x:10,y:0,z:10},{x:-10,y:0,z:10},{x:-10,y:0,z:-10},{x:0,y:10,z:0}]),e()(this,"init",function(n){t.container=document.getElementById(n);var i=t.container.clientWidth,o=t.container.clientHeight;t.scene=new a.Scene,t.camera=new a.PerspectiveCamera(60,i/o,1,500),t.camera.position.x=0,t.camera.position.y=0,t.camera.position.z=80,t.camera.lookAt(t.scene.position),t.renderer=new a.WebGLRenderer,t.renderer.setPixelRatio(window.devicePixelRatio),t.renderer.setSize(i,o),t.container.appendChild(t.renderer.domElement),t.controls=new $(t.camera,t.renderer.domElement),t.controls.enableDamping=!0,t.controls.dampingFactor=.1,t.cubeGroup=new a.Group,t.scene.add(t.cubeGroup),t.addThings(),t.addLight(),t.animate(),t.initStats(),t.initGui()}),e()(this,"destroy",function(){t.toggleGui(0),Object.values(t.Geometrys).forEach(function(n){n.dispose()}),Object.values(t.Materials).forEach(function(n){n.dispose()}),t.scene.clear(),t.renderer.dispose(),t.renderer.forceContextLoss(),t.camera=null,t.scene=null,t.renderer=null,t.GuiInit=null,t.stats=null,t.tween&&(t.tween.stop(),t.tween=null),cancelAnimationFrame(t.animateFrame)}),e()(this,"initStats",function(){t.stats=new N,t.stats.showPanel(0),t.stats.dom.style.position="absolute",t.container.appendChild(t.stats.dom)}),e()(this,"initGui",function(){if(t.GuiInit){t.toggleGui();return}t.GuiInit=new V.GUI({}),t.GuiInit.domElement.style.position="absolute",t.GuiInit.domElement.style.right="10px",t.GuiInit.domElement.style.top="10px";var n=t.GuiInit.addFolder("\u63A7\u5236\u7A97\u53E3");n.add(t.guiData,"x",-.1,.1,.005).name("\u81EA\u8F6C\u901F\u5EA6"),n.addColor(t.guiData,"color").name("\u80CC\u666F\u989C\u8272"),n.open()}),e()(this,"toggleGui",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!(!t.GuiInit||!t.GuiInit.domElement)){var i=t.GuiInit.domElement.style.display=="none"?"":"none";n==0&&(i="none"),t.GuiInit.domElement.style.display=i}}),e()(this,"addLight",function(){var n=new a.AmbientLight(6842472);t.scene.add(n);var i=new a.DirectionalLight(16777215);i.position.set(100,80,100),i.intensity=.6,t.scene.add(i)}),e()(this,"addThings",function(){t.addCubes(),t.addTrunk(),t.addCurves(),t.initTween()}),e()(this,"addTrunk",function(){var n=new a.ConeGeometry(2,8,4),i=new a.MeshPhongMaterial({color:16776960});t.Meshs.trunk=new a.Mesh(n,i),t.scene.add(t.Meshs.trunk)}),e()(this,"addCubes",function(){t.Geometrys.cubeGeo=new a.BoxBufferGeometry(1,1,1),t.Materials.cubeMate=new a.MeshBasicMaterial(16777215),t.pointList.map(function(n){t.addCube(n)})}),e()(this,"addCube",function(n){var i=new a.Mesh(t.Geometrys.cubeGeo,t.Materials.cubeMate);i.position.copy(n),t.cubeGroup.add(i)}),e()(this,"addCurves",function(){t.curve=new a.CatmullRomCurve3(t.cubeGroup.children.map(function(o){return o.position})),t.curve.curveType="catmullrom",t.curve.closed=!0;var n=t.curve.getPoints(50);t.Geometrys.lineGeo=new a.BufferGeometry().setFromPoints(n);var i=new a.LineLoop(t.Geometrys.lineGeo,new a.LineBasicMaterial({color:65280}));t.scene.add(i)}),e()(this,"changePosition",function(n){var i=t.curve.getPointAt(n);t.Meshs.trunk.position.copy(i);var o=t.cubeGroup.children[3].position,l=o.clone().sub(i),d=l.length();d<1?t.addpointMark&&(t.addpointMark=!1,t.addPoint()):t.addpointMark=!0;var u=t.curve.getTangentAt(n),p=u.add(i);t.Meshs.trunk.lookAt(p)}),e()(this,"timeMax",10),e()(this,"timeDur",0),e()(this,"handleMove",function(){var n=t.clock.getDelta();t.timeDur+=n,t.timeDur>t.timeMax&&(t.timeDur=0);var i=t.timeDur/t.timeMax;t.changePosition(i)}),e()(this,"addpointMark",!0),e()(this,"addPoint",function(){var n=Math.random()*40-20,i=Math.random()*40-20,o=Math.random()*40-20,l={x:n,y:i,z:o},d=Math.random()*40-20,u=Math.random()*40-20,p=Math.random()*40-20,Q={x:d,y:u,z:p};t.pointList=[t.pointList[3],t.pointList[4],l,Q,t.pointList[2]],t.cubeGroup.children.map(function(h,Y){var g=t.pointList[Y],q=new a.Vector3(g.x,g.y,g.z);h.position.copy(q)}),t.curve=new a.CatmullRomCurve3(t.pointList.map(function(h){return new a.Vector3(h.x,h.y,h.z)})),t.timeDur=0;var X=t.curve.getPoints(50);t.Geometrys.lineGeo.setFromPoints(X),console.log(t.pointList,t.cubeGroup)}),e()(this,"initTween",function(){}),e()(this,"animate",function(){t.stats&&t.stats.begin(),t.render(),U.update(),t.controls.update(),t.stats&&t.stats.end(),t.animateFrame=requestAnimationFrame(t.animate)}),e()(this,"render",function(){t.handleMove(),t.renderer.setClearColor(t.guiData.color,1),t.renderer.render(t.scene,t.camera)})}),H=new k,M=H,s=r(85893),J=v.Z.Title,w=v.Z.Paragraph,E=v.Z.Text,K=function(f){R()(n,f);var t=B()(n);function n(){var i;G()(this,n);for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];return i=t.call.apply(t,[this].concat(l)),e()(b()(i),"state",{}),i}return C()(n,[{key:"didShow",value:function(){var i=x()(m()().mark(function l(){return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},l)}));function o(){return i.apply(this,arguments)}return o}()},{key:"didMount",value:function(){var i=x()(m()().mark(function l(){return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:M.init("WebGL-output-test");case 1:case"end":return u.stop()}},l)}));function o(){return i.apply(this,arguments)}return o}()},{key:"willUnmount",value:function(){M.destroy()}},{key:"render",value:function(){return j()(this.state),(0,s.jsxs)(W.Z,{title:"",children:[(0,s.jsx)(O.Z,{}),(0,s.jsxs)(v.Z,{children:[(0,s.jsx)(J,{level:3,children:"\u66F2\u7EBF"}),(0,s.jsxs)(w,{children:[(0,s.jsxs)(E,{children:["Curve:"," ",(0,s.jsx)("a",{href:"https://threejs.org/docs/index.html?q=CatmullRom#api/zh/extras/core/Curve",target:"_blank",children:"https://threejs.org/docs/index.html?q=CatmullRom#api/zh/extras/core/Curve"})]}),(0,s.jsxs)(E,{children:["\u6839\u636E\u70B9\u6570\u7EC4\u521B\u5EFA\u66F2\u7EBF:"," ",(0,s.jsx)("a",{href:"https://threejs.org/docs/index.html?q=CatmullRom#api/zh/extras/curves/CatmullRomCurve3",target:"_blank",children:"https://threejs.org/docs/index.html?q=CatmullRom#api/zh/extras/curves/CatmullRomCurve3"})]})]}),(0,s.jsx)(w,{})]}),(0,s.jsx)("div",{id:"WebGL-output-test",style:{width:"600px",height:"600px",position:"relative"}})]})}}]),n}(A.Z)}}]);
